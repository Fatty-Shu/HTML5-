var H5=function(){return this.id=("h5_"+Math.random()).replace(".","_"),this.el=$('<div class="h5" id="'+this.id+'"></div>').hide(),this.page=[],$("body").append(this.el),this.addPage=function(t,e){var a=$('<div class="h5-page section"></div>');return void 0!=t&&a.addClass("h5-page-"+t),void 0!=e&&a.text(e),this.el.append(a),this.page.push(a),"function"==typeof this.whenAddPage&&this.whenAddPage(),this},this.addComponent=function(t,e){var a,e=e||{},n=this.page.slice(-1)[0];switch(e=$.extend({type:"base"},e),e.type){case"base":a=new H5ComponentBase(t,e);break;case"polyline":a=new H5ComponentPolyline(t,e);break;case"pie":a=new H5ComponentPie(t,e);break;case"bar":a=new H5ComponentBar(t,e);break;case"bar-v":a=new H5ComponentBar_v(t,e);break;case"radar":a=new H5ComponentRadar(t,e);break;case"circlePie":a=new H5ComponentCirclePie(t,e);break;case"point":a=new H5ComponentPoint(t,e)}return n.append(a),this},this.loader=function(t){this.el.show(),this.el.fullpage({onLeave:function(t,e,a){$(this).find(".h5-component").each(function(){$(this).triggerHandler("onLeave")})},afterLoad:function(t,e,a){$(this).find(".h5-component").each(function(){$(this).triggerHandler("onLoad")})}}),this.page[0].find(".h5-component").each(function(){$(this).triggerHandler("onLoad")}),t&&$.fn.fullpage.moveTo(t)},this.loader="function"==typeof h5_loading?h5_loading:this.loader,this},H5ComponentBase=function(t,e){var e=e||{};this.Timeout="";var a=("h5_c_"+Math.random()).replace(".","_"),n="h5-component-"+e.type+" h5-component-name-"+t,o=$('<div class="h5-component '+n+'" id="'+a+'"></div>');return e.text&&o.text(e.text),e.width&&o.width(e.width/2),e.height&&o.height(e.height/2),e.css&&o.css(e.css),e.bg&&o.css("backgroundImage","url("+e.bg+")"),e.center===!0&&o.css({marginLeft:e.width/4*-1+"px",left:"50%"}),"function"==typeof e.onclick&&o.bind("click",function(){$.fn.fullpage.moveTo(1)}),o.on("onLoad",function(){setTimeout(function(){e.animateIn&&o.animate(e.animateIn,function(){$(this).addClass("h5-component-"+e.type+"-load").removeClass("h5-component-"+e.type+"-leave")})},e.delay||0)}),o.on("onLeave",function(){setTimeout(function(){o.addClass("h5-component-"+e.type+"-leave").removeClass("h5-component-"+e.type+"-load"),e.animateOut&&o.animate(e.animateOut)},e.delay||0)}),o},H5ComponentPoint=function(t,e){var a=new H5ComponentBase(t,e),n=e.data[0][1];return $.each(e.data,function(t,o){var i=$('<div class="point "></div>'),d=o[1]/n*100+"%",c=$("<div class='name'>"+o[0]+"</div>"),s=$("<div class='per'>"+100*o[1]+"%</div>");c.append(s),i.append(c),i.width(d).height(d),o[2]&&i.css("background-color",o[2]),i.css({"z-index":e.data.length-t}),void 0!=o[3]&&void 0!=o[4]&&i.on("doPointAnimate",function(){return $(this).css("right","unset"),$(this).animate({left:o[3],top:o[4]}),!1}),a.append(i)}),a.on("onLoad",function(){setTimeout(function(){a.addClass("h5-component-"+e.type+"-load").removeClass("h5-component-"+e.type+"-leave"),a.find(".point ").trigger("doPointAnimate")},e.delay||0)}),a.on("onLeave",function(){$(this).find(".point").animate({left:"0",top:"0"},function(){$(this).css("right","0")}),setTimeout(function(){a.addClass("h5-component-"+e.type+"-leave").removeClass("h5-component-"+e.type+"-load"),e.animateOut&&a.animate(e.animateOut)},e.delay||0)}),a},H5ComponentBar=function(t,e){var a=new H5ComponentBase(t,e);return $.each(e.data,function(t,e){var n=$("<div class='line'></div>"),o=$("<div class='name'></div>").text(e[0]),i=$("<div class='rate'><div class='bg'></div></div>").width(100*e[1]+"%"),d=$("<div class='per'></div>").text(100*e[1]+"%");void 0!=e[2]&&(i.find(".bg").css("background-color",e[2]),d.css("color",e[2])),i.append(d),n.append(o).append(i),a.append(n)}),a},H5ComponentBar_v=function(t,e){var a=new H5ComponentBase(t,e);return $.each(e.data,function(t,e){var n=$("<div class='line'></div>"),o=$("<div class='name'></div>").text(e[0]),i=$("<div class='rate'><div class='bg'></div></div>").height(100*e[1]+"%"),d=$("<div class='per'></div>").text(100*e[1]+"%");void 0!=e[2]&&(i.find(".bg").css("background-color",e[2]),d.css("color",e[2])),i.prepend(d),n.append(o).append(i),a.append(n)}),a},H5ComponentPolyline=function(t,e){var a=new H5ComponentBase(t,e),n=e.width,o=e.height,i=document.createElement("canvas"),d=i.getContext("2d");i.width=d.width=n,i.height=d.height=o,a.append(i);var c=5;window.ctx=d,d.beginPath(),d.strokeStyle="#F00",d.lineWidth=o/c,d.strokeStyle="#d2e2ff";for(var s=0;s<c+1;s++){var p=o/c*s;s!==c&&(p+=d.lineWidth/2),s%2==0&&(d.moveTo(0,p),d.lineTo(n,p))}d.stroke(),d.beginPath(),d.lineWidth=1,d.strokeStyle="#AAA";for(var s=0;s<c+1;s++){var p=o/c*s;s!==c&&(p+=d.lineWidth),d.moveTo(0,p),d.lineTo(n,p)}d.stroke(),d.beginPath(),d.lineWidth=1,d.strokeStyle="#AAA",c=e.data.length+1,PrjNameWidth=n/c;for(var s=0;s<c+1;s++){var r=n/c*s;if(s!==c&&(r+=.5),d.moveTo(r,0),d.lineTo(r,p),e.data[s]){var h=$("<div class='prj-name'></div>").text(e.data[s][0]);h.css({width:PrjNameWidth,marginLeft:PrjNameWidth*s/2,"transition-delay":1.5+.4*s+"s"}),a.append(h)}}d.stroke();var i=document.createElement("canvas"),d=i.getContext("2d");i.width=d.width=n,i.height=d.width=o,a.append(i);var l=e.data,m=n/(l.length+1),g=function(t){d.clearRect(0,0,n,o),d.beginPath(),d.strokeStyle="#f20";for(var e=0;e<l.length;e++){var a=m*e+m,i=o*(1-l[e][1]*t);d.moveTo(a,i),d.arc(a,i,5,0,2*Math.PI)}d.fillStyle="#f20",d.fill(),d.moveTo(m,o*(1-l[0][1]*t));for(var e=0;e<l.length;e++){var a=m*e+m,i=o*(1-l[e][1]*t);d.lineTo(a,i)}d.stroke(),d.strokeStyle="rgba(255,136,120,0)",d.fillStyle="rgba(255,136,120,0.25)",d.lineTo(m*(e-1)+m,o),d.lineTo(m,o),d.fill(),d.font="18px Arial";for(var e=0;e<l.length;e++){var a=m*e+m,i=o*(1-l[e][1]*t);l[e][2]?d.fillStyle=l[e][2]:d.fillStyle="#595959",d.fillText(100*l[e][1]+"%",a-10,i-18)}d.stroke()};return g(0),a.on("onLoad",function(){setTimeout(function(){e.animateIn&&a.animate(e.animateIn,function(){$(this).addClass("h5-component-"+e.type+"-load").removeClass("h5-component-"+e.type+"-leave")})},e.delay||0);for(var t=0,n=0;n<100;n++)setTimeout(function(){t+=.01,g(t)},10*n+500)}),a.on("onLeave",function(){for(var t=1,n=0;n<100;n++)setTimeout(function(){t-=.01,g(t)},10*n);setTimeout(function(){a.addClass("h5-component-"+e.type+"-leave").removeClass("h5-component-"+e.type+"-load"),e.animateOut&&a.animate(e.animateOut)},e.delay||0)}),a},H5ComponentRadar=function(t,e){var a=new H5ComponentBase(t,e),n=e.width,o=e.height,i=document.createElement("canvas"),d=i.getContext("2d");i.width=d.width=n,i.height=d.height=o,a.append(i);for(var c=n/2,s=e.data,p=s.length,r=!1,h=5;h>0;h--){d.beginPath(),d.fillStyle=(r=!r)?"#99c0ff":"#f1f9ff",d.strokeStyle=d.fillStyle;for(var l=0;l<p;l++){var m=2*Math.PI/360*(360/p)*l,g=c+Math.sin(m)*c*(h/5),f=c+Math.cos(m)*c*(h/5);d.lineTo(g,f)}d.fill(),d.closePath(),d.stroke()}d.beginPath(),d.strokeStyle="#e1e1e1";for(var l=0;l<p;l++){var m=2*Math.PI/360*(360/p)*l,g=c+Math.sin(m)*c,f=c+Math.cos(m)*c,u=$("<div class='text'></div>").text(s[l][0]);d.moveTo(c,c),d.lineTo(g,f),g<n/2?u.css("right",(n-g)/2):u.css("left",g/2),f<o/2?u.css("bottom",(o-f)/2):u.css("top",f/2),a.append(u)}d.stroke();var i=document.createElement("canvas"),d=i.getContext("2d");i.width=d.width=n,i.height=d.height=o,a.append(i);var y=function(t){d.clearRect(0,0,n,o),d.beginPath(),d.lineWidth=2,d.strokeStyle="#ff7676";for(var e=0;e<p;e++){var i=2*Math.PI/360*(360/p)*e,r=c+Math.sin(i)*c*s[e][1]*t,h=c+Math.cos(i)*c*s[e][1]*t;d.lineTo(r,h)}if(d.closePath(),d.stroke(),d.beginPath(),d.lineWidth=1,d.strokeStyle="#ff7676",d.fillStyle="#ff7676",a.find(".rate").remove(),t>.98)for(var e=0;e<p;e++){var i=2*Math.PI/360*(360/p)*e,r=c+Math.sin(i)*c*s[e][1]*t,h=c+Math.cos(i)*c*s[e][1]*t;d.moveTo(r,h),d.arc(r,h,5,0,2*Math.PI),d.fill();var l=$("<div class='rate'></div>").text(100*s[e][1]+"%");r<n/2?l.css("right",(n-r)/2-30):l.css("left",r/2-30),h<o/2?l.css("bottom",(o-h)/2-0):l.css("top",h/2-10),a.append(l)}d.stroke()};return y(0),a.on("onLoad",function(){setTimeout(function(){e.animateIn&&a.animate(e.animateIn,function(){$(this).addClass("h5-component-"+e.type+"-load").removeClass("h5-component-"+e.type+"-leave")})},e.delay||0);for(var t=0,n=0;n<100;n++)setTimeout(function(){t+=.01,y(t)},10*n+500)}),a.on("onLeave",function(){for(var t=1,n=0;n<100;n++)setTimeout(function(){t-=.01,y(t)},10*n);setTimeout(function(){a.addClass("h5-component-"+e.type+"-leave").removeClass("h5-component-"+e.type+"-load"),e.animateOut&&a.animate(e.animateOut)},e.delay||0)}),a},H5ComponentPie=function(t,e){var a=new H5ComponentBase(t,e),n=e.width,o=e.height,i=document.createElement("canvas"),d=i.getContext("2d"),c=document.createElement("canvas"),s=c.getContext("2d");c.width=i.width=d.width=n,c.height=i.height=d.height=o,a.append(c),a.append(i);var p=n/2,r=e.data,h=r.length;s.beginPath(),s.fillStyle="#ececec",s.lineWidth=0,s.strokeStyle="#ececec",s.moveTo(p,p),s.arc(p,p,p-1,0,2*Math.PI),s.fill(),s.closePath(),s.stroke();var l=function(t){var e=-.5*Math.PI,i=-.5*Math.PI;if(0===t)return d.clearRect(0,0,n,o),!1;t/=100,d.clearRect(0,0,n,o);for(var c=2*Math.PI*t-.5*Math.PI,s=0;s<h;s++){if(d.beginPath(),d.fillStyle=r[s][2],d.lineWidth=0,d.strokeStyle=d.fillStyle,i+=2*Math.PI*(r[s][1]/1),i>c&&(i=c),d.moveTo(p,p),d.arc(p,p,p-1,e,i),d.fill(),d.closePath(),d.stroke(),1===t){var l=p+Math.sin(e+(i-e)/2)*p,m=p+Math.cos(e+(i-e)/2)*p,g=$('<div class="line"></div>');g.css({top:l/2,"border-color":r[s][2],color:r[s][2]}),g.html("<span>"+r[s][0]+"<br>"+100*r[s][1]+"% </span> "),m>n/2?g.css({left:m/2}):g.css({right:(n-m)/2}),l<n/2&&g.find("span").addClass("top"),a.append(g)}if(i==c)break;i<c&&(e=i)}};return l(0),a.on("onLoad",function(){setTimeout(function(){a.addClass("h5-component-"+e.type+"-load").removeClass("h5-component-"+e.type+"-leave")},e.delay||0);for(var t=0,n=0;n<100;n++)setTimeout(function(){t+=1,l(t)},10*n+500)}),a.on("onLeave",function(){for(var t=100,n=0;n<100;n++)setTimeout(function(){t-=1,l(t)},10*n);$(this).find(".line").remove(),setTimeout(function(){a.addClass("h5-component-"+e.type+"-leave").removeClass("h5-component-"+e.type+"-load"),e.animateOut&&a.animate(e.animateOut)},e.delay||0)}),a},H5ComponentCirclePie=function(t,e){function a(t){c.clearRect(0,0,o,i),c.beginPath(),c.fillStyle="#fff",c.lineWidth=.05*o,c.strokeStyle="#ececec",c.arc(s,s,s-.05*o,0,2*Math.PI),c.fill(),c.closePath(),c.stroke(),t/=100;var a=-.5*Math.PI,n=-.5*Math.PI+t*e.data[1]*2*Math.PI;c.beginPath(),c.lineWidth=.05*o,c.lineCap="round",c.strokeStyle="#ec7374",c.arc(s,s,s-.05*o,a,n),c.stroke()}var n=new H5ComponentBase(t,e),o=e.width,i=e.height,d=document.createElement("canvas"),c=d.getContext("2d");d.width=c.width=o,d.height=c.height=i,n.append(d);var s=o/2,p=$("<div class='title'>").html(e.data[0]+"<br>"+(100*e.data[1]+"%"));return p.css({color:e.data[2]}),n.append(p),a(0),n.on("onLoad",function(){setTimeout(function(){e.animateIn&&n.animate(e.animateIn,function(){$(this).addClass("h5-component-"+e.type+"-load").removeClass("h5-component-"+e.type+"-leave")})},e.delay||0);for(var t=0,o=0;o<50;o++)setTimeout(function(){t+=2,a(t)},10*o+500)}),n.on("onLeave",function(){for(var t=100,o=0;o<50;o++)setTimeout(function(){t-=2,a(t)},10*o);$(this).find(".line").remove(),setTimeout(function(){n.addClass("h5-component-"+e.type+"-leave").removeClass("h5-component-"+e.type+"-load"),e.animateOut&&n.animate(e.animateOut)},e.delay||0)}),n},h5_loading=function(t,e){var a=this.id;if(void 0===this._images){window[a]=this,this._images=(t||[]).length,this.loaded=0;for(var n=this._images-1;n>=0;n--){var o=t[n],i=new Image;i.onload=function(){window[a].loader(t,e)},i.src=o}return this}return this.loaded++,$(".loading #rate").text((this.loaded/this._images*100>>0)+"%"),this.loaded<this._images?this:(this.el.show(),this.el.fullpage({onLeave:function(t,e,a){$(this).find(".h5-component").each(function(){$(this).triggerHandler("onLeave")})},afterLoad:function(t,e,a){$(this).find(".h5-component").each(function(){$(this).triggerHandler("onLoad")})}}),this.page[0].find(".h5-component").each(function(){$(this).triggerHandler("onLoad")}),void(e&&$.fn.fullpage.moveTo(e)))};$(function(){var t=new H5;t.whenAddPage=function(){this.addComponent("slide_up",{bg:"imgs/footer.png",css:{opacity:0,left:0,bottom:-20,width:"100%",height:"39px",zIndex:999},animateIn:{opacity:1,bottom:"-5px"},animateOut:{opacity:0,bottom:"-26px"},delay:500})},t.addPage("face").addComponent("topic",{center:!0,width:395,height:129,bg:"imgs/face_logo.png",css:{opacity:0,top:0},animateIn:{top:100,opacity:1},animateOut:{top:0,opacity:0}}).addComponent("slogan",{center:!0,width:365,height:99,bg:"imgs/face_slogan.png",css:{opacity:0,top:180},animateIn:{left:"50%",opacity:1},animateOut:{left:0,opacity:0},delay:500}).addComponent("face_b_left",{width:370,height:493,bg:"imgs/face_img_left.png",css:{opacity:0,left:-50,bottom:-50},animateIn:{left:0,bottom:0,opacity:1},animateOut:{left:-50,bottom:-50,opacity:0},delay:1e3}).addComponent("face_b_right",{width:276,height:449,bg:"imgs/face_img_right.png",css:{opacity:0,right:-50,bottom:-50},animateIn:{right:0,bottom:0,opacity:1},animateOut:{right:-50,bottom:-50,opacity:0},delay:1e3}).addPage().addComponent("caption",{text:"核心理念"}).addComponent("text",{width:500,height:30,center:!0,text:"IT教育网=只学有用的",css:{opacity:0,textAlign:"center",color:"red",fontSize:"26px"},animateIn:{opacity:1,top:120},animateOut:{opacity:0,top:240}}).addComponent("description",{center:!0,width:481,height:295,bg:"imgs/description_bg.gif",css:{opacity:0,padding:"15px 10px 10px 10px",color:"#fff",fontSize:"15px",lineHeight:"18px",textAlign:"justify",top:240},text:"2013年，IT教育网的诞生引领中国IT职业从教育进入新时代；高质量实战课程、全新教学模式、实时互动学习，以领先优势打造行业品牌；迄今为止，IT教育网已成为中国规模最大、互动性最高的IT技能学习平台。",animateIn:{opacity:1,top:190},animateOut:{opacity:0,top:240},delay:1e3}).addComponent("people",{center:!0,width:515,height:305,bg:"imgs/p1_people.png",css:{opacity:0,bottom:0},animateIn:{opacity:1,bottom:40},animateOut:{opacity:0,bottom:0},delay:500}).addPage().addComponent("caption",{text:"课程分布方向"}).addComponent("polyline",{type:"polyline",data:[["前端开发",.4,"#ff7676"],["移动开发",.2],["后端开发",.3,"blue"],["图像处理",.1]],width:530,height:300,center:!0,css:{opacity:0,top:200},animateIn:{opacity:1,top:250},animateOut:{opacity:0,top:100}}).addComponent("msg",{text:"前端开发课程占到40%",css:{opacity:0,top:160,textAlign:"center",width:"100%",color:"#ff7676"},animateIn:{opacity:1},animateOut:{opacity:0}}).addPage().addComponent("caption",{text:"移动开发课程资源"}).addComponent("pie",{type:"pie",data:[["Android",.45,"#ff7676"],["IOS",.25,"#5ddbd8"],["Cocos2d-x",.2,"#99c0ff"],["Unity-3D",.1,"#ffad69"]],css:{top:200},width:300,height:300,center:!0}).addComponent("msg",{text:"移动课程 Android 占到40%",css:{opacity:0,bottom:120,textAlign:"center",width:"100%",color:"#ff7676"},animateIn:{opacity:1},animateOut:{opacity:0}}).addPage().addComponent("caption",{text:"前端开发课程"}).addComponent("bar",{type:"bar",width:530,height:600,data:[["Javascript",.4,"#ff7676"],["HTML/CSS",.2],["CSS3",.1],["HTML5",.2],["jQuery",.35],["Bootstrap",.05],["AngularJs",.09]],css:{top:100,opacity:0},animateIn:{opacity:1,top:200},animateOut:{opacity:0,top:100},center:!0}).addComponent("msg",{text:"前端课程 Javascript 占到40%",css:{opacity:0,bottom:120,textAlign:"center",width:"100%",color:"#ff7676"},animateIn:{opacity:1},animateOut:{opacity:0}}).addPage().addComponent("caption",{text:"前端开发课程"}).addComponent("bar",{type:"bar-v",width:530,height:400,data:[["Js",.4,"#ff7676"],["CSS3",.1],["HTML5",.2],["PHP",.05],["jQuery",.35]],css:{top:220,opacity:0},animateIn:{opacity:1,top:200},animateOut:{opacity:0,top:220},center:!0}).addPage().addComponent("caption",{text:"后端开发课程"}).addComponent("radar",{type:"radar",width:400,height:400,data:[["Js",.9,"#ff7676"],["CSS3",.8],["HTML5",.7],["PHP",.6],["jQuery",.5]],css:{top:100,opacity:0},animateIn:{opacity:1,top:200},animateOut:{opacity:0,top:100},center:!0}).addPage().addComponent("caption",{text:"课程报名人数过万"}).addComponent("ring-all",{type:"circlePie",center:!0,width:300,height:300,data:["总课程",.7,"#ff7676"],css:{top:120,opacity:0,fontSize:"30px"},animateIn:{opacity:1},animateOut:{opacity:0}}).addComponent("msg",{text:"不同课程报名人数超过一万占比",css:{opacity:0,top:300,textAlign:"center",width:"100%",color:"#ff7676"},animateIn:{opacity:1},animateOut:{opacity:0},delay:1800}).addComponent("ring-1",{type:"circlePie",center:!0,width:160,height:160,data:["前端开发",.4,"darkorange"],css:{left:30,bottom:110,opacity:0,fontSize:"10px"},animateIn:{opacity:1},animateOut:{opacity:0}}).addComponent("ring-2",{type:"circlePie",width:160,height:160,data:["后端开发",.3,"darkorange"],css:{left:30,bottom:110,opacity:0,fontSize:"10px"},animateIn:{opacity:1},animateOut:{opacity:0}}).addComponent("ring-3",{type:"circlePie",width:160,height:160,data:["移动开发",.2,"darkorange"],css:{right:30,bottom:110,opacity:0,fontSize:"10px"},animateIn:{opacity:1},animateOut:{opacity:0}}).addComponent("ring-3",{type:"circlePie",width:160,height:160,data:["数据处理",.1,"darkorange"],css:{left:70,bottom:40,opacity:0,fontSize:"10px"},animateIn:{opacity:1},animateOut:{opacity:0}}).addComponent("ring-3",{type:"circlePie",width:160,height:160,data:["图像处理",.1,"darkorange"],css:{right:70,bottom:40,opacity:0,fontSize:"10px"},animateIn:{opacity:1},animateOut:{opacity:0}}).addPage().addComponent("caption",{text:"课程难度分布"}).addComponent("point",{type:"point",width:300,height:300,data:[["中级",.4,"#ff7676"],["初级",.2,"#ffa3a4","-50%","-80%"],["高级",.3,"#99c1ff","80%","-130%"]],css:{bottom:"20%"},center:!0}).addPage("tail").addComponent("logo",{center:!0,width:359,height:129,bg:"imgs/tail_logo.png",css:{top:240,opacity:0},animateIn:{opacity:1,top:210},animateOut:{opacity:0,top:240}}).addComponent("slogan",{center:!0,width:314,height:46,bg:"imgs/tail_slogan.png",css:{top:280,opacity:0},animateIn:{opacity:1,left:"50%"},animateOut:{opacity:0,left:"0%"},delay:500}).addComponent("share",{width:128,height:120,bg:"imgs/tail_share.png",css:{opacity:0,top:110,right:110},animateIn:{opacity:1,top:10,right:10},animateOut:{opacity:0,top:110,right:110},delay:1e3}).addComponent("back",{width:52,height:50,bg:"imgs/tail_back.png",center:!0,onclick:function(){$.fn.fullpage.moveTo(1)}}).loader(["imgs/page_bg.png","imgs/face_bg.png","imgs/page_caption_bg.png","imgs/page_bg.png","imgs/footer.png","imgs/face_logo.png","imgs/face_slogan.png","imgs/face_img_left.png","imgs/face_img_right.png","imgs/description_bg.gif","imgs/p1_people.png","imgs/tail_logo.png","imgs/tail_share.png","imgs/tail_back.png"])});